## Описание проекта

Данный проект реализует процессы репликации данных из базы данных PostgreSQL в MySQL и формирования аналитических витрин.

- **Jupyter Notebook**:
  - Содержит основной код для генерации данных, настройки соединений и разработки пайплайнов.

- **Пайплайны Airflow**:
  - DAG’и для автоматизации следующих процессов:
    - Репликация данных из PostgreSQL в MySQL.
    - Создание аналитических витрин.

- **Docker**:
  - Файлы `Dockerfile` и `docker-compose.yml` для развёртывания инфраструктуры проекта.

## Файлы в репозитории

- `final.ipynb`: Jupyter Notebook с основным кодом проекта.
- `dags/`: Директория с DAG'ами для Airflow.
- `Dockerfile`: Файл для сборки Docker-образа.
- `docker-compose.yml`: Файл для настройки контейнеров.
- `README.md`: Документация проекта.

## Инструкция по запуску

### 1. Установка окружения

Для запуска проекта потребуется:

- **Python 3.8+**.
- **PostgreSQL**.
- **MySQL**.
- **Apache Airflow**.
- **Docker** и **Docker Compose**.


### 2. Настройка Docker

1. Убедитесь, что Docker установлен и работает на вашем компьютере.
2. Соберите контейнеры с помощью `docker-compose`:

```bash
docker-compose up --build
```

### 3. Настройка баз данных

1. **PostgreSQL**:
   - Создайте базу данных PostgreSQL:
     ```sql
     CREATE DATABASE final;
     ```
   - Остальное заполняется автоматически в файле final.ipynb

2. **MySQL**:
   - Создайте целевую базу данных MySQL:
     ```sql
     CREATE DATABASE final;
     ```

### 4. Настройка Airflow

1. Настройте Airflow для работы с DAG'ами:
   - Скопируйте DAG'и из директории `dags/` в папку Airflow.
   - Настройте подключения в Airflow Admin:
     - `postgres_connection` — для подключения к PostgreSQL.
     - `mysql_connection` — для подключения к MySQL.

2. Запустите Airflow:
   ```bash
   airflow webserver & airflow scheduler
   ```

3. Активируйте DAG’и через веб-интерфейс.

### 5. Выполнение пайплайнов

- Запустите DAG’и для:
  - Репликации данных.
  - Генерации аналитических витрин.

## Аналитические витрины

### Витрина активности пользователей

- **Описание**: Витрина содержит данные о поведении пользователей для анализа их активности.
- **Поля**:
  - `user_id` (int): Идентификатор пользователя.
  - `first_name` (text): Имя пользователя.
  - `last_name` (text): Фамилия пользователя.
  - `email` (text): Электронная почта.
  - `phone` (text): Номер телефона.
  - `registration_date` (timestamp): Дата регистрации.
  - `loyalty_status` (text): Статус лояльности (например, Gold, Silver).
  - `total_orders` (bigint): Общее количество заказов пользователя.
  - `total_amount` (decimal(20,2)): Общая сумма покупок пользователя.
- **Источник данных**: Таблицы `Users` и `Orders` из базы данных MySQL.
- **Применение**: Используется для анализа клиентской активности и сегментации пользователей.

### Витрина топ-продуктов

- **Описание**: Витрина содержит данные о продажах продуктов, включая популярность и выручку.
- **Поля**:
  - `product_id` (int): Идентификатор продукта.
  - `name` (text): Название продукта.
  - `description` (text): Описание продукта.
  - `category_id` (int): Идентификатор категории продукта.
  - `price` (decimal(10,2)): Цена продукта.
  - `stock_quantity` (int): Количество товара на складе.
  - `creation_date` (timestamp): Дата добавления продукта.
  - `total_quantity` (bigint): Общее количество проданных единиц продукта.
  - `total_revenue` (decimal(20,2)): Общая выручка от продаж продукта.
- **Источник данных**: Таблицы `Products` и `OrderDetails` из базы данных MySQL.
- **Применение**: Используется для анализа популярности товаров и планирования ассортимента.